---
title: "Betfair_UKPolitics"
---

# About

I am interested in *UK Political Betting*. so, I regularly get odds from all Betfair's "UK Politics" Markets, i.e. all the sub-branches of [this page](http://www.betfair.com/exchange/?nodeId=MENU:2707982).

This Project if about Getting, Cleaning, and Exploratory Analysis of those odds.

\newpage  

# Preparing Data

## Getting List of Betfair UK Politics Markets

*Get_list_of_Betfair_UKPolitics_Markets.R* recursively retrives a list of all the market that [this page](http://www.betfair.com/exchange/?nodeId=MENU:2707982) is a parent or grandparent of.

As the markets don't appear (or disappear) everyday, I only run the following (commented out) chunk once or twice a week. 

```{r}
# root_dir <- getwd()
# setwd("./Codes/")
# source("Get_list_of_Betfair_UKPolitics_Markets.R")
# setwd(root_dir)
```

The output file looks like:
```{r}
head(read.csv("./raw_data/list_of_Betfair_UKPolitics_Markets.txt", 
              header = FALSE))

```
## Getting Odds

A c# project goes through all markets, parses HTMLs, extracts usefull bits, and appends them to the existing *Betfair_UKPolitics_odds.csv* file.

the output looks like:
```{r}
head(read.table("./raw_data/Betfair_UKPolitics_odds.csv", sep = "\t"))
```

## Cleaning Market Names

Some Markets have had different names since I started collecting data (e.g. **2015 UK General Election - Overall Majority** used to **Next UK General Election - Overall Majority**) *Clean_UKPolitics_Odds_Data_Market_Names_Tests_Before_Cleaning.R* runs some tests to find them.

*Market_Names_Replacements* contains a list of "bad" names (first column) to be replace with "good" ones (second column). It looks like:

```{r}
head(read.table("./raw_data/Market_Names_Replacements.csv", sep = "\t"))
```

```{r}
root_dir <- getwd()
setwd("./Codes/")
source("Clean_UKPolitics_Odds_Data.R")
setwd(root_dir)
```